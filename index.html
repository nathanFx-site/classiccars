<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinnie Classic Autos | Classic & Vintage Cars</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --red: #d42e2e;
            --blue: #1e3c9d;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --dark-gray: #333333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            color: var(--dark-gray);
            line-height: 1.6;
            background-color: var(--white);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--red) 0%, var(--blue) 50%, var(--white) 100%);
            color: white;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            padding: 1rem 0;
            background-color: rgba(0, 0, 0, 0.8);
            position: fixed;
            width: 100%;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
        }
        
        .logo span {
            color: var(--red);
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--red);
        }
        
        /* Auth Buttons */
        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .auth-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .login-btn {
            background-color: transparent;
            border: 2px solid var(--red);
            color: var(--red);
        }
        
        .login-btn:hover {
            background-color: var(--red);
            color: white;
        }
        
        .signup-btn {
            background-color: var(--red);
            color: white;
            border: 2px solid var(--red);
        }
        
        .signup-btn:hover {
            background-color: #b02525;
            border-color: #b02525;
        }
        
        .wishlist-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: 15px;
            position: relative;
        }
        
        .wishlist-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--red);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            background: url('https://images.unsplash.com/photo-1537005081207-04f90e3ba640?ixlib=rb-4.0.3&auto=format&fit=crop&w=1674&q=80') no-repeat center center/cover;
            position: relative;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(212, 46, 46, 0.7) 0%, rgba(30, 60, 157, 0.7) 50%, rgba(255, 255, 255, 0.7) 100%);
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 600px;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: white;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: white;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.8rem;
            background-color: var(--red);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: background-color 0.3s;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background-color: #b02525;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            margin-left: 1rem;
        }
        
        .btn-outline:hover {
            background-color: white;
            color: var(--blue);
        }
        
        /* Search and Filter */
        .search-filter {
            background-color: var(--light-gray);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }
        
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .filter-group {
            margin-bottom: 1rem;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* Featured Vehicles */
        .section-title {
            text-align: center;
            margin: 3rem 0;
            font-size: 2.2rem;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--red), var(--blue));
            margin: 0.5rem auto;
        }
        
        .vehicles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .vehicle-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            position: relative;
        }
        
        .vehicle-card:hover {
            transform: translateY(-5px);
        }
        
        .vehicle-image {
            height: 200px;
            background-color: #ddd;
            background-position: center;
            background-size: cover;
        }
        
        .vehicle-details {
            padding: 1.5rem;
        }
        
        .vehicle-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }
        
        .vehicle-price {
            font-size: 1.5rem;
            color: var(--red);
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .vehicle-specs {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #666;
        }
        
        .wishlist-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.2rem;
            color: #ccc;
            transition: color 0.3s;
        }
        
        .wishlist-icon.active {
            color: var(--red);
        }
        
        .wishlist-icon:hover {
            color: var(--red);
        }
        
        /* Vehicle Detail Page */
        .vehicle-detail {
            padding: 100px 0;
        }
        
        .detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }
        
        .vehicle-gallery {
            position: relative;
        }
        
        .main-image {
            height: 400px;
            background-color: #ddd;
            background-position: center;
            background-size: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .thumbnail-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        
        .thumbnail {
            height: 80px;
            background-color: #ddd;
            background-position: center;
            background-size: cover;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .vehicle-info h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--dark-gray);
        }
        
        .vehicle-info .price {
            font-size: 2rem;
            color: var(--red);
            font-weight: bold;
            margin-bottom: 1.5rem;
        }
        
        .specs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #eee;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            padding: 2rem;
            background-color: var(--light-gray);
            border-radius: 8px;
            margin: 2rem 0;
        }
        
        .admin-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .admin-form {
            background-color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .image-upload {
            border: 2px dashed #ccc;
            padding: 1rem;
            text-align: center;
            margin-bottom: 1rem;
            cursor: pointer;
        }
        
        .image-upload:hover {
            border-color: var(--blue);
        }
        
        /* Auth Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Wishlist Page */
        .wishlist-page {
            padding: 100px 0;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark-gray);
            color: white;
            padding: 3rem 0 1rem;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(to right, var(--red), var(--blue));
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 0.8rem;
        }
        
        .footer-column ul li a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-column ul li a:hover {
            color: var(--red);
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .social-links a {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            background-color: #444;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .social-links a:hover {
            background-color: var(--red);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #444;
            font-size: 0.9rem;
            color: #999;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0.5rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .admin-controls {
                grid-template-columns: 1fr;
            }
            
            .detail-container {
                grid-template-columns: 1fr;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">Vinnie <span>Classic</span> Autos</div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link" data-section="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-section="inventory">Inventory</a></li>
                    <li><a href="#" class="nav-link" data-section="about">About Us</a></li>
                    <li><a href="#" class="nav-link" data-section="contact">Contact</a></li>
                    <li><a href="#" class="nav-link" data-section="admin" id="admin-link" style="display: none;">Admin</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <button class="auth-btn login-btn" id="login-btn">Login</button>
                <button class="auth-btn signup-btn" id="signup-btn">Sign Up</button>
                <button class="auth-btn login-btn" id="logout-btn" style="display: none;">Logout</button>
                <button class="wishlist-btn" id="header-wishlist" style="display: none;">
                    <i class="fas fa-heart"></i>
                    <span class="wishlist-count">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Sections -->
    <main>
        <!-- Home Section -->
        <section id="home-section">
            <div class="hero">
                <div class="container hero-content">
                    <h1>Discover Classic Cars</h1>
                    <p>Vinnie Classic Autos offers the finest selection of vehicles from family cruisers, heavy duty trucks, farm and industrial locomotives to the bachelor's dream car expertly maintained in their original glory.</p>
                    <div>
                        <a href="#" class="btn" id="browse-btn">Browse Inventory</a>
                        <a href="#" class="btn btn-outline" id="learn-more-btn">Learn More</a>
                    </div>
                </div>
            </div>

            <!-- Featured Vehicles -->
            <div class="container">
                <h2 class="section-title">Featured Vehicles</h2>
                <div class="vehicles-grid" id="featured-vehicles">
                    <!-- Vehicles will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Inventory Section -->
        <section id="inventory-section" style="display: none; padding: 100px 0;">
            <div class="container">
                <h2 class="section-title">Our Inventory</h2>
                
                <!-- Search and Filter -->
                <div class="search-filter">
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label for="search-make">Make</label>
                            <select id="search-make">
                                <option value="">All Makes</option>
                                <!-- Options will be populated dynamically -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="search-model">Model</label>
                            <input type="text" id="search-model" placeholder="Enter model">
                        </div>
                        <div class="filter-group">
                            <label for="search-year">Year Range</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" id="search-year-min" placeholder="Min" min="1900" max="2030">
                                <input type="number" id="search-year-max" placeholder="Max" min="1900" max="2030">
                            </div>
                        </div>
                        <div class="filter-group">
                            <label for="search-price">Price Range</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" id="search-price-min" placeholder="Min">
                                <input type="number" id="search-price-max" placeholder="Max">
                            </div>
                        </div>
                    </div>
                    <button class="btn" style="margin-top: 1rem;" id="apply-filters">Apply Filters</button>
                    <button class="btn btn-outline" style="margin-top: 1rem; margin-left: 1rem;" id="reset-filters">Reset Filters</button>
                </div>
                
                <div class="vehicles-grid" id="inventory-vehicles">
                    <!-- Inventory will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Vehicle Detail Section -->
        <section id="vehicle-detail-section" style="display: none; padding: 100px 0;">
            <div class="container vehicle-detail">
                <div class="detail-container">
                    <div class="vehicle-gallery">
                        <div class="main-image" id="detail-main-image"></div>
                        <div class="thumbnail-container" id="detail-thumbnails">
                            <!-- Thumbnails will be loaded dynamically -->
                        </div>
                    </div>
                    <div class="vehicle-info">
                        <h1 id="detail-title"></h1>
                        <div class="price" id="detail-price"></div>
                        <div class="specs-grid">
                            <div class="spec-item">
                                <span>Year:</span>
                                <span id="detail-year"></span>
                            </div>
                            <div class="spec-item">
                                <span>Make:</span>
                                <span id="detail-make"></span>
                            </div>
                            <div class="spec-item">
                                <span>Model:</span>
                                <span id="detail-model"></span>
                            </div>
                            <div class="spec-item">
                                <span>Mileage:</span>
                                <span id="detail-mileage"></span>
                            </div>
                            <div class="spec-item">
                                <span>Transmission:</span>
                                <span id="detail-transmission"></span>
                            </div>
                            <div class="spec-item">
                                <span>Exterior Color:</span>
                                <span id="detail-exterior"></span>
                            </div>
                            <div class="spec-item">
                                <span>Interior Color:</span>
                                <span id="detail-interior"></span>
                            </div>
                            <div class="spec-item">
                                <span>VIN:</span>
                                <span id="detail-vin"></span>
                            </div>
                        </div>
                        <p id="detail-description"></p>
                        <div style="margin-top: 2rem;">
                            <button class="btn" id="detail-wishlist-btn">Add to Wishlist</button>
                            <button class="btn btn-outline" style="margin-left: 1rem;" id="request-info-btn">Request Information</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about-section" style="display: none; padding: 100px 0;">
            <div class="container">
                <h2 class="section-title">About Vinnie Classic Autos</h2>
                <div style="max-width: 800px; margin: 0 auto;">
                    <p style="margin-bottom: 1.5rem;">Vinnie Classic Autos was founded in 2018 with a passion for making new car owners. What started as a small showroom operation has grown into one of the most respected car dealerships in the country.</p>
                    
                    <p style="margin-bottom: 1.5rem;">We take pride in every vehicle that passes through our doors, ensuring that each one meets our rigorous standards of quality and authenticity.</p>
                    
                    <p style="margin-bottom: 1.5rem;">Whether you're a seasoned car owner or buying your first car, we're here to make your experience enjoyable and rewarding. Our knowledgeable staff will guide you through every step of the process, from selection to financing and beyond.</p>
                    
                    <h3 style="margin: 2rem 0 1rem; color: var(--red);">Our Mission</h3>
                    <p>To connect enthusiasts with the cars of their dreams while preserving automotive heritage for future generations.</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact-section" style="display: none; padding: 100px 0;">
            <div class="container">
                <h2 class="section-title">Contact Us</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem;">
                    <div>
                        <h3 style="margin-bottom: 1.5rem; color: var(--red);">Get In Touch</h3>
                        <form id="contact-form">
                            <div class="form-group">
                                <label for="name">Your Name</label>
                                <input type="text" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="btn">Send Message</button>
                        </form>
                    </div>
                    <div>
                        <h3 style="margin-bottom: 1.5rem; color: var(--red);">Visit Our Showroom</h3>
                        <div style="margin-bottom: 2rem;">
                            <p><strong>Address:</strong> Moi Avenue, Mombasa</p>
                            <p><a href="tel:+254724394273"><i class="fas fa-phone"></i> +254 724 394 273</a></p>
                            <p><a href="mailto:classiccars21@gmail.com"><i class="fas fa-envelope"></i> classiccars21@gmail.com</a></p>
                        </div>
                        
                        <h3 style="margin-bottom: 1rem; color: var(--red);">Business Hours</h3>
                        <div style="margin-bottom: 2rem;">
                            <p>Monday-Friday: 9am - 7pm</p>
                            <p>Saturday: 10am - 6pm</p>
                            <p>Sunday: 11am - 4pm</p>
                        </div>
                        
                        <div id="map" style="height: 200px; background-color: #ddd; display: flex; justify-content: center; align-items: center;">
                            <!-- In a real implementation, you would embed a Google Map here -->
                            <p>Map would be displayed here</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Wishlist Section -->
        <section id="wishlist-section" style="display: none; padding: 100px 0;">
            <div class="container wishlist-page">
                <h2 class="section-title">My Wishlist</h2>
                <div class="vehicles-grid" id="wishlist-vehicles">
                    <!-- Wishlist vehicles will be loaded dynamically -->
                </div>
                <div id="empty-wishlist" style="text-align: center; display: none;">
                    <p>Your wishlist is empty. Start adding vehicles you're interested in!</p>
                    <a href="#" class="btn" style="margin-top: 1rem;" id="browse-wishlist-btn">Browse Inventory</a>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin-section" style="display: none; padding: 100px 0;">
            <div class="container">
                <h2 class="section-title">Admin Panel</h2>
                <div class="admin-panel" id="admin-panel">
                    <h3 style="margin-bottom: 1.5rem; color: var(--red);">Vehicle Management</h3>
                    
                    <div class="admin-controls">
                        <div class="admin-form">
                            <h4 style="margin-bottom: 1rem;">Add New Vehicle</h4>
                            <form id="add-vehicle-form">
                                <div class="form-group">
                                    <label for="make">Make</label>
                                    <input type="text" id="make" required>
                                </div>
                                <div class="form-group">
                                    <label for="model">Model</label>
                                    <input type="text" id="model" required>
                                </div>
                                <div class="form-group">
                                    <label for="year">Year</label>
                                    <input type="number" id="year" min="1900" max="2030" required>
                                </div>
                                <div class="form-group">
                                    <label for="price">Price</label>
                                    <input type="number" id="price" required>
                                </div>
                                <div class="form-group">
                                    <label for="mileage">Mileage</label>
                                    <input type="number" id="mileage" required>
                                </div>
                                <div class="form-group">
                                    <label for="transmission">Transmission</label>
                                    <select id="transmission" required>
                                        <option value="Manual">Manual</option>
                                        <option value="Automatic">Automatic</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="exterior">Exterior Color</label>
                                    <input type="text" id="exterior" required>
                                </div>
                                <div class="form-group">
                                    <label for="interior">Interior Color</label>
                                    <input type="text" id="interior" required>
                                </div>
                                <div class="form-group">
                                    <label for="vin">VIN</label>
                                    <input type="text" id="vin" required>
                                </div>
                                <div class="form-group">
                                    <label for="description">Description</label>
                                    <textarea id="description" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="featured">Featured Vehicle</label>
                                    <select id="featured" required>
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Images</label>
                                    <div class="image-upload" id="image-upload-area">
                                        <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                        <p>Click to upload images or drag and drop</p>
                                        <input type="file" id="image-upload" multiple style="display: none;">
                                    </div>
                                    <div id="uploaded-images"></div>
                                </div>
                                <button type="submit" class="btn">Add Vehicle</button>
                            </form>
                        </div>
                        
                        <div class="admin-form">
                            <h4 style="margin-bottom: 1rem;">Current Inventory</h4>
                            <div id="admin-vehicles-list">
                                <!-- Vehicles will be listed here for management -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signup-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Account</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password (min 6 characters)</label>
                    <input type="password" id="signup-password" minlength="6" required>
                </div>
                <div class="form-group">
                    <label for="signup-admin">Admin Account (requires special code)</label>
                    <input type="checkbox" id="signup-admin">
                </div>
                <div class="form-group" id="admin-code-container" style="display: none;">
                    <label for="admin-code">Admin Code</label>
                    <input type="password" id="admin-code">
                </div>
                <button type="submit" class="btn">Create Account</button>
            </form>
        </div>
    </div>

    <!-- Request Info Modal -->
    <div class="modal" id="request-info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Request Information</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="request-info-form">
                <input type="hidden" id="request-vehicle-id">
                <div class="form-group">
                    <label for="request-name">Your Name</label>
                    <input type="text" id="request-name" required>
                </div>
                <div class="form-group">
                    <label for="request-email">Email Address</label>
                    <input type="email" id="request-email" required>
                </div>
                <div class="form-group">
                    <label for="request-phone">Phone Number</label>
                    <input type="tel" id="request-phone">
                </div>
                <div class="form-group">
                    <label for="request-message">Message</label>
                    <textarea id="request-message" rows="4" required>I'm interested in this vehicle and would like more information.</textarea>
                </div>
                <button type="submit" class="btn">Send Request</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>Vinnie Classic Autos</h3>
                    <p>Your one stop shop for quality Japanese and United Kingdom autos. We accept cash, hire purchase, trade in and external Financing</p>
                    <div class="social-links">
                        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#" class="nav-link" data-section="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-section="inventory">Inventory</a></li>
                        <li><a href="#" class="nav-link" data-section="about">About Us</a></li>
                        <li><a href="#" class="nav-link" data-section="contact">Contact</a></li>
                        <li><a href="#" class="nav-link" data-section="wishlist" id="footer-wishlist">My Wishlist</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li>Moi Avenue</li>
                        <li>Mombasa City, MBS</li>
                        <li>Phone: +254 724 394 273</li>
                        <li>Email: classiccars21@gmail.com</li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Business Hours</h3>
                    <ul>
                        <li>Monday-Friday: 9am - 6pm</li>
                        <li>Saturday: 9am - 2pm</li>
                        <li>Sunday: Closed</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Vinnie Classic Autos. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase configuration - Replace with your actual config
        const firebaseConfig = {
            apiKey: "AIzaSyBORD0TJMSeWoZsFVvAO0lv1Jc9IpW7wbs",
            authDomain: "vinnie-a057e.firebaseapp.com",
            projectId: "vinnie-a057e",
            storageBucket: "vinnie-a057e.firebasestorage.app",
            messagingSenderId: "725405233413",
            appId: "1:725405233413:web:986373f9c8e658dfbc876c",
            measurementId: "G-5JXYTEHRKG"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();
        
        // DOM Elements
        const sections = {
            home: document.getElementById('home-section'),
            inventory: document.getElementById('inventory-section'),
            about: document.getElementById('about-section'),
            contact: document.getElementById('contact-section'),
            admin: document.getElementById('admin-section'),
            wishlist: document.getElementById('wishlist-section'),
            vehicleDetail: document.getElementById('vehicle-detail-section')
        };
        
        const navLinks = document.querySelectorAll('.nav-link');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const adminLink = document.getElementById('admin-link');
        const loginModal = document.getElementById('login-modal');
        const signupModal = document.getElementById('signup-modal');
        const requestInfoModal = document.getElementById('request-info-modal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const requestInfoForm = document.getElementById('request-info-form');
        const browseBtn = document.getElementById('browse-btn');
        const learnMoreBtn = document.getElementById('learn-more-btn');
        const featuredVehiclesContainer = document.getElementById('featured-vehicles');
        const inventoryVehiclesContainer = document.getElementById('inventory-vehicles');
        const wishlistVehiclesContainer = document.getElementById('wishlist-vehicles');
        const emptyWishlist = document.getElementById('empty-wishlist');
        const adminPanel = document.getElementById('admin-panel');
        const addVehicleForm = document.getElementById('add-vehicle-form');
        const adminVehiclesList = document.getElementById('admin-vehicles-list');
        const contactForm = document.getElementById('contact-form');
        const adminCheckbox = document.getElementById('signup-admin');
        const adminCodeContainer = document.getElementById('admin-code-container');
        const headerWishlist = document.getElementById('header-wishlist');
        const wishlistCount = document.querySelector('.wishlist-count');
        const imageUploadArea = document.getElementById('image-upload-area');
        const imageUploadInput = document.getElementById('image-upload');
        const uploadedImagesContainer = document.getElementById('uploaded-images');
        const searchMake = document.getElementById('search-make');
        const searchModel = document.getElementById('search-model');
        const searchYearMin = document.getElementById('search-year-min');
        const searchYearMax = document.getElementById('search-year-max');
        const searchPriceMin = document.getElementById('search-price-min');
        const searchPriceMax = document.getElementById('search-price-max');
        const applyFilters = document.getElementById('apply-filters');
        const resetFilters = document.getElementById('reset-filters');
        const footerWishlist = document.getElementById('footer-wishlist');
        const browseWishlistBtn = document.getElementById('browse-wishlist-btn');
        const detailWishlistBtn = document.getElementById('detail-wishlist-btn');
        const requestInfoBtn = document.getElementById('request-info-btn');
        
        // Vehicle detail elements
        const detailMainImage = document.getElementById('detail-main-image');
        const detailThumbnails = document.getElementById('detail-thumbnails');
        const detailTitle = document.getElementById('detail-title');
        const detailPrice = document.getElementById('detail-price');
        const detailYear = document.getElementById('detail-year');
        const detailMake = document.getElementById('detail-make');
        const detailModel = document.getElementById('detail-model');
        const detailMileage = document.getElementById('detail-mileage');
        const detailTransmission = document.getElementById('detail-transmission');
        const detailExterior = document.getElementById('detail-exterior');
        const detailInterior = document.getElementById('detail-interior');
        const detailVin = document.getElementById('detail-vin');
        const detailDescription = document.getElementById('detail-description');
        const requestVehicleId = document.getElementById('request-vehicle-id');
        
        // Current user state
        let currentUser = null;
        let currentUserData = null;
        let wishlist = [];
        let allVehicles = [];
        let uploadedImages = [];
        let currentVehicleId = null;
        
        // Event Listeners
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = link.getAttribute('data-section');
                showSection(section);
            });
        });
        
        loginBtn.addEventListener('click', () => {
            loginModal.style.display = 'flex';
        });
        
        signupBtn.addEventListener('click', () => {
            signupModal.style.display = 'flex';
        });
        
        logoutBtn.addEventListener('click', () => {
            auth.signOut();
        });
        
        closeModalButtons.forEach(button => {
            button.addEventListener('click', () => {
                loginModal.style.display = 'none';
                signupModal.style.display = 'none';
                requestInfoModal.style.display = 'none';
            });
        });
        
        browseBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showSection('inventory');
        });
        
        learnMoreBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showSection('about');
        });
        
        footerWishlist.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentUser) {
                showSection('wishlist');
            } else {
                loginModal.style.display = 'flex';
            }
        });
        
        browseWishlistBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showSection('inventory');
        });
        
        headerWishlist.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentUser) {
                showSection('wishlist');
            } else {
                loginModal.style.display = 'flex';
            }
        });
        
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    loginModal.style.display = 'none';
                    loginForm.reset();
                    showSection('inventory'); // Show inventory on successful login
                })
                .catch((error) => {
                    alert('Login failed: ' + error.message); // Show error message
                });
        });
        
        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const isAdmin = document.getElementById('signup-admin').checked;
            const adminCode = document.getElementById('admin-code').value;

            if (isAdmin && adminCode !== "admin123") {
                alert("Invalid admin code");
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    return db.collection('users').doc(userCredential.user.uid).set({
                        name: name,
                        email: email,
                        isAdmin: isAdmin,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    signupModal.style.display = 'none';
                    signupForm.reset();
                    loginModal.style.display = 'flex'; // Show login modal after registration
                    alert('Account created successfully! Please log in.');
                })
                .catch((error) => {
                    alert('Registration failed: ' + error.message); // Show error message
                });
        });
        
        requestInfoForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('request-name').value;
            const email = document.getElementById('request-email').value;
            const phone = document.getElementById('request-phone').value;
            const message = document.getElementById('request-message').value;
            const vehicleId = document.getElementById('request-vehicle-id').value;
            
            // Save inquiry to Firestore
            db.collection('inquiries').add({
                name,
                email,
                phone,
                message,
                vehicleId,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                requestInfoModal.style.display = 'none';
                requestInfoForm.reset();
                alert('Your request has been sent! We will contact you soon.');
            })
            .catch((error) => {
                alert('Error sending request: ' + error.message);
            });
        });
        
        requestInfoBtn.addEventListener('click', () => {
            if (!currentUser) {
                loginModal.style.display = 'flex';
                return;
            }
            
            requestVehicleId.value = currentVehicleId;
            requestInfoModal.style.display = 'flex';
        });
        
        addVehicleForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!currentUser || !currentUserData.isAdmin) {
                alert('You do not have permission to add vehicles');
                return;
            }
            
            const make = document.getElementById('make').value;
            const model = document.getElementById('model').value;
            const year = parseInt(document.getElementById('year').value);
            const price = parseFloat(document.getElementById('price').value);
            const mileage = parseInt(document.getElementById('mileage').value);
            const transmission = document.getElementById('transmission').value;
            const exterior = document.getElementById('exterior').value;
            const interior = document.getElementById('interior').value;
            const vin = document.getElementById('vin').value;
            const description = document.getElementById('description').value;
            const featured = document.getElementById('featured').value === 'yes';
            
            // Add vehicle to Firestore
            db.collection('vehicles').add({
                make,
                model,
                year,
                price,
                mileage,
                transmission,
                exterior,
                interior,
                vin,
                description,
                featured,
                images: uploadedImages,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                addVehicleForm.reset();
                uploadedImages = [];
                uploadedImagesContainer.innerHTML = '';
                alert('Vehicle added successfully!');
                loadVehicles();
                loadAdminVehicles();
            })
            .catch((error) => {
                alert('Error adding vehicle: ' + error.message);
            });
        });
        
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            
            // Save contact form submission to Firestore
            db.collection('contacts').add({
                name,
                email,
                message,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                contactForm.reset();
                alert('Thank you for your message! We will get back to you soon.');
            })
            .catch((error) => {
                alert('Error sending message: ' + error.message);
            });
        });
        
        adminCheckbox.addEventListener('change', () => {
            adminCodeContainer.style.display = adminCheckbox.checked ? 'block' : 'none';
        });
        
        imageUploadArea.addEventListener('click', () => {
            imageUploadInput.click();
        });
        
        imageUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageUploadArea.style.borderColor = '#1e3c9d';
        });
        
        imageUploadArea.addEventListener('dragleave', () => {
            imageUploadArea.style.borderColor = '#ccc';
        });
        
        imageUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            imageUploadArea.style.borderColor = '#ccc';
            
            if (e.dataTransfer.files) {
                handleImageUpload(e.dataTransfer.files);
            }
        });
        
        imageUploadInput.addEventListener('change', () => {
            if (imageUploadInput.files) {
                handleImageUpload(imageUploadInput.files);
            }
        });
        
        applyFilters.addEventListener('click', () => {
            filterVehicles();
        });
        
        resetFilters.addEventListener('click', () => {
            searchMake.value = '';
            searchModel.value = '';
            searchYearMin.value = '';
            searchYearMax.value = '';
            searchPriceMin.value = '';
            searchPriceMax.value = '';
            filterVehicles();
        });
        
        detailWishlistBtn.addEventListener('click', () => {
            if (!currentUser) {
                loginModal.style.display = 'flex';
                return;
            }
            
            toggleWishlistItem(currentVehicleId);
        });
        
        // Functions
        function showSection(sectionName) {
            // Hide all sections
            Object.values(sections).forEach(section => {
                if (section) section.style.display = 'none';
            });
            
            // Show the requested section
            if (sections[sectionName]) {
                sections[sectionName].style.display = 'block';
                
                // Load section-specific data
                if (sectionName === 'inventory') {
                    loadVehicles();
                    populateMakeFilter();
                } else if (sectionName === 'admin' && currentUserData && currentUserData.isAdmin) {
                    loadAdminVehicles();
                } else if (sectionName === 'wishlist' && currentUser) {
                    loadWishlist();
                }
            }
        }
        
        function showVehicleDetail(vehicleId) {
            currentVehicleId = vehicleId;
            const vehicle = allVehicles.find(v => v.id === vehicleId);
            
            if (vehicle) {
                // Update detail page with vehicle information
                detailTitle.textContent = `${vehicle.year} ${vehicle.make} ${vehicle.model}`;
                detailPrice.textContent = `$${vehicle.price.toLocaleString()}`;
                detailYear.textContent = vehicle.year;
                detailMake.textContent = vehicle.make;
                detailModel.textContent = vehicle.model;
                detailMileage.textContent = `${vehicle.mileage.toLocaleString()} miles`;
                detailTransmission.textContent = vehicle.transmission;
                detailExterior.textContent = vehicle.exterior;
                detailInterior.textContent = vehicle.interior;
                detailVin.textContent = vehicle.vin;
                detailDescription.textContent = vehicle.description;
                
                // Set main image
                if (vehicle.images && vehicle.images.length > 0) {
                    detailMainImage.style.backgroundImage = `url('${vehicle.images[0]}')`;
                } else {
                    detailMainImage.style.backgroundImage = 'url(https://placehold.co/600x400/cccccc/333333/png?text=No+Image)';
                }
                
                // Create thumbnails
                detailThumbnails.innerHTML = '';
                if (vehicle.images && vehicle.images.length > 0) {
                    vehicle.images.forEach((image, index) => {
                        const thumbnail = document.createElement('div');
                        thumbnail.className = 'thumbnail';
                        thumbnail.style.backgroundImage = `url('${image}')`;
                        thumbnail.addEventListener('click', () => {
                            detailMainImage.style.backgroundImage = `url('${image}')`;
                        });
                        detailThumbnails.appendChild(thumbnail);
                    });
                }
                
                // Update wishlist button state
                updateWishlistButtonState(vehicleId);
                
                // Show detail section
                showSection('vehicleDetail');
            }
        }
        
        function updateWishlistButtonState(vehicleId) {
            if (wishlist.includes(vehicleId)) {
                detailWishlistBtn.textContent = 'Remove from Wishlist';
                detailWishlistBtn.style.backgroundColor = '#666';
            } else {
                detailWishlistBtn.textContent = 'Add to Wishlist';
                detailWishlistBtn.style.backgroundColor = '';
            }
        }
        
        function loadVehicles() {
            // Clear existing content
            featuredVehiclesContainer.innerHTML = '';
            inventoryVehiclesContainer.innerHTML = '';
            
            // In a real app, you would fetch from Firestore
            db.collection('vehicles').get()
                .then((querySnapshot) => {
                    allVehicles = [];
                    querySnapshot.forEach((doc) => {
                        const vehicle = { id: doc.id, ...doc.data() };
                        allVehicles.push(vehicle);
                        const vehicleCard = createVehicleCard(vehicle);
                        
                        if (vehicle.featured) {
                            featuredVehiclesContainer.appendChild(vehicleCard);
                        }
                        
                        inventoryVehiclesContainer.appendChild(vehicleCard.cloneNode(true));
                    });
                    
                    // Populate makes for filter
                    populateMakeFilter();
                })
                .catch((error) => {
                    console.error('Error loading vehicles: ', error);
                    // Fallback to sample data if Firebase fails
                    loadSampleVehicles();
                });
        }
        
        function loadSampleVehicles() {
            // Sample vehicles data
            const sampleVehicles = [
                {
                    id: "1",
                    make: "Ford",
                    model: "Mustang",
                    year: 1965,
                    price: 64995,
                    images: ["https://images.unsplash.com/photo-1542362567-b07e54358753?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],
                    mileage: 25000,
                    transmission: "Manual",
                    exterior: "Red",
                    interior: "Black",
                    vin: "1ABCD23E456F78901",
                    description: "Beautifully restored 1965 Ford Mustang with original V8 engine.",
                    featured: true
                },
                {
                    id: "2",
                    make: "Chevrolet",
                    model: "Corvette",
                    year: 1957,
                    price: 125000,
                    images: ["https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],
                    mileage: 52000,
                    transmission: "4-Speed",
                    exterior: "Blue",
                    interior: "Red",
                    vin: "2GHIJ45K678L90123",
                    description: "Rare 1957 Chevrolet Corvette in excellent condition.",
                    featured: true
                },
                {
                    id: "3",
                    make: "Chevrolet",
                    model: "Camaro",
                    year: 1969,
                    price: 79500,
                    images: ["https://images.unsplash.com/photo-1567899378494-47b22b2b56c9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],
                    mileage: 38000,
                    transmission: "Automatic",
                    exterior: "Green",
                    interior: "Black",
                    vin: "3MNOP67Q890R12345",
                    description: "1969 Chevrolet Camaro with matching numbers and original paint.",
                    featured: true
                }
            ];
            
            allVehicles = sampleVehicles;
            
            sampleVehicles.forEach(vehicle => {
                const vehicleCard = createVehicleCard(vehicle);
                
                if (vehicle.featured) {
                    featuredVehiclesContainer.appendChild(vehicleCard);
                }
                
                inventoryVehiclesContainer.appendChild(vehicleCard.cloneNode(true));
            });
            
            // Populate makes for filter
            populateMakeFilter();
        }
        
        function createVehicleCard(vehicle) {
            const card = document.createElement('div');
            card.className = 'vehicle-card';
            card.innerHTML = `
                <div class="vehicle-image" style="background-image: url('${vehicle.images && vehicle.images.length > 0 ? vehicle.images[0] : 'https://placehold.co/400x300/cccccc/333333/png?text=No+Image'}')"></div>
                <div class="vehicle-details">
                    <h3 class="vehicle-title">${vehicle.year} ${vehicle.make} ${vehicle.model}</h3>
                    <p class="vehicle-price">$${vehicle.price.toLocaleString()}</p>
                    <div class="vehicle-specs">
                        <span>${vehicle.mileage.toLocaleString()} miles</span>
                        <span>${vehicle.transmission}</span>
                    </div>
                    <p>${vehicle.description.substring(0, 100)}...</p>
                    <button class="btn" style="margin-top: 1rem;" data-vehicle-id="${vehicle.id}">View Details</button>
                </div>
                <div class="wishlist-icon ${wishlist.includes(vehicle.id) ? 'active' : ''}" data-vehicle-id="${vehicle.id}">
                    <i class="fas fa-heart"></i>
                </div>
            `;
            
            // Add event listeners
            card.querySelector('.btn').addEventListener('click', (e) => {
                const vehicleId = e.target.getAttribute('data-vehicle-id');
                showVehicleDetail(vehicleId);
            });
            
            card.querySelector('.wishlist-icon').addEventListener('click', (e) => {
                const vehicleId = e.currentTarget.getAttribute('data-vehicle-id');
                toggleWishlistItem(vehicleId);
            });
            
            return card;
        }
        
        function toggleWishlistItem(vehicleId) {
            if (!currentUser) {
                loginModal.style.display = 'flex';
                return;
            }
            
            const index = wishlist.indexOf(vehicleId);
            const wishlistIcon = document.querySelector(`.wishlist-icon[data-vehicle-id="${vehicleId}"]`);
            
            if (index > -1) {
                // Remove from wishlist
                wishlist.splice(index, 1);
                if (wishlistIcon) {
                    wishlistIcon.classList.remove('active');
                }
            } else {
                // Add to wishlist
                wishlist.push(vehicleId);
                if (wishlistIcon) {
                    wishlistIcon.classList.add('active');
                }
            }
            
            // Update wishlist count
            updateWishlistCount();
            
            // Update wishlist button state on detail page
            if (currentVehicleId === vehicleId) {
                updateWishlistButtonState(vehicleId);
            }
            
            // Save to Firestore
            if (currentUser) {
                db.collection('users').doc(currentUser.uid).update({
                    wishlist: wishlist
                })
                .catch((error) => {
                    console.error('Error updating wishlist: ', error);
                });
            }
        }
        
        function updateWishlistCount() {
            wishlistCount.textContent = wishlist.length;
        }
        
        function loadWishlist() {
            wishlistVehiclesContainer.innerHTML = '';
            
            if (wishlist.length === 0) {
                emptyWishlist.style.display = 'block';
                wishlistVehiclesContainer.style.display = 'none';
            } else {
                emptyWishlist.style.display = 'none';
                wishlistVehiclesContainer.style.display = 'grid';
                
                wishlist.forEach(vehicleId => {
                    const vehicle = allVehicles.find(v => v.id === vehicleId);
                    if (vehicle) {
                        const vehicleCard = createVehicleCard(vehicle);
                        wishlistVehiclesContainer.appendChild(vehicleCard);
                    }
                });
            }
        }
        
        function loadAdminVehicles() {
            adminVehiclesList.innerHTML = '';
            
            allVehicles.forEach(vehicle => {
                const vehicleItem = document.createElement('div');
                vehicleItem.className = 'vehicle-item';
                vehicleItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #ddd;">
                        <div>
                            <strong>${vehicle.year} ${vehicle.make} ${vehicle.model}</strong>
                            <p>$${vehicle.price.toLocaleString()} - ${vehicle.mileage.toLocaleString()} miles</p>
                        </div>
                        <button class="btn" style="background-color: #ff4d4d;" onclick="deleteVehicle('${vehicle.id}')">Delete</button>
                    </div>
                `;
                
                adminVehiclesList.appendChild(vehicleItem);
            });
        }
        
        function deleteVehicle(vehicleId) {
            if (!confirm('Are you sure you want to delete this vehicle?')) return;
            
            db.collection('vehicles').doc(vehicleId).delete()
                .then(() => {
                    alert('Vehicle deleted successfully');
                    loadAdminVehicles();
                    loadVehicles();
                })
                .catch((error) => {
                    alert('Error deleting vehicle: ' + error.message);
                });
        }
        
        function handleImageUpload(files) {
            if (!currentUser || !currentUserData.isAdmin) {
                alert('You do not have permission to upload images');
                return;
            }
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.type.match('image.*')) {
                    const storageRef = storage.ref(`vehicle-images/${Date.now()}_${file.name}`);
                    const uploadTask = storageRef.put(file);
                    
                    uploadTask.on('state_changed', 
                        (snapshot) => {
                            // Progress monitoring can be added here
                        }, 
                        (error) => {
                            alert('Error uploading image: ' + error.message);
                        }, 
                        () => {
                            // Upload completed successfully
                            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                                uploadedImages.push(downloadURL);
                                
                                // Display uploaded image
                                const imgElement = document.createElement('div');
                                imgElement.style.display = 'inline-block';
                                imgElement.style.margin = '5px';
                                imgElement.innerHTML = `
                                    <img src="${downloadURL}" style="width: 100px; height: 100px; object-fit: cover; border-radius: 4px;">
                                `;
                                uploadedImagesContainer.appendChild(imgElement);
                            });
                        }
                    );
                }
            }
        }
        
        function populateMakeFilter() {
            // Get all unique makes
            const makes = [...new Set(allVehicles.map(vehicle => vehicle.make))];
            
            // Clear existing options except the first one
            while (searchMake.options.length > 1) {
                searchMake.remove(1);
            }
            
            // Add makes to filter
            makes.sort().forEach(make => {
                const option = document.createElement('option');
                option.value = make;
                option.textContent = make;
                searchMake.appendChild(option);
            });
        }
        
        function filterVehicles() {
            const make = searchMake.value.toLowerCase();
            const model = searchModel.value.toLowerCase();
            const yearMin = searchYearMin.value ? parseInt(searchYearMin.value) : 1900;
            const yearMax = searchYearMax.value ? parseInt(searchYearMax.value) : new Date().getFullYear();
            const priceMin = searchPriceMin.value ? parseFloat(searchPriceMin.value) : 0;
            const priceMax = searchPriceMax.value ? parseFloat(searchPriceMax.value) : Number.MAX_VALUE;
            
            // Clear inventory container
            inventoryVehiclesContainer.innerHTML = '';
            
            // Filter vehicles
            const filteredVehicles = allVehicles.filter(vehicle => {
                return (
                    (make === '' || vehicle.make.toLowerCase().includes(make)) &&
                    (model === '' || vehicle.model.toLowerCase().includes(model)) &&
                    vehicle.year >= yearMin &&
                    vehicle.year <= yearMax &&
                    vehicle.price >= priceMin &&
                    vehicle.price <= priceMax
                );
            });
            
            // Display filtered vehicles
            filteredVehicles.forEach(vehicle => {
                const vehicleCard = createVehicleCard(vehicle);
                inventoryVehiclesContainer.appendChild(vehicleCard);
            });
            
            if (filteredVehicles.length === 0) {
                inventoryVehiclesContainer.innerHTML = '<p style="text-align: center; grid-column: 1 / -1;">No vehicles match your search criteria.</p>';
            }
        }
        
        // Auth state observer
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                currentUser = user;
                loginBtn.style.display = 'none';
                signupBtn.style.display = 'none';
                logoutBtn.style.display = 'block';
                headerWishlist.style.display = 'block';
                
                // Get user data from Firestore
                db.collection('users').doc(user.uid).get()
                    .then((doc) => {
                        if (doc.exists) {
                            currentUserData = doc.data();
                            
                            if (currentUserData.isAdmin) {
                                adminLink.style.display = 'block';
                                adminPanel.style.display = 'block';
                            } else {
                                adminLink.style.display = 'none';
                                adminPanel.style.display = 'none';
                            }
                            
                            // Load wishlist
                            if (currentUserData.wishlist) {
                                wishlist = currentUserData.wishlist;
                                updateWishlistCount();
                            }
                        }
                    })
                    .catch((error) => {
                        console.error('Error getting user data: ', error);
                    });
            } else {
                // User is signed out
                currentUser = null;
                currentUserData = null;
                loginBtn.style.display = 'block';
                signupBtn.style.display = 'block';
                logoutBtn.style.display = 'none';
                headerWishlist.style.display = 'none';
                adminLink.style.display = 'none';
                adminPanel.style.display = 'none';
                
                // Clear wishlist
                wishlist = [];
                updateWishlistCount();
                
                // If on admin section, redirect to home
                if (window.location.hash === '#admin') {
                    showSection('home');
                }
            }
        });
        
        // Initialize the page
        showSection('home');
        loadVehicles();
        
        // Make deleteVehicle function available globally for the onclick handlers
        window.deleteVehicle = deleteVehicle;
    </script>
</body>
</html>